import{c as M,k as D,r as q,a0 as N,a8 as I,a9 as U,o as x,h as L,l as $,g as F,s as A,L as R,aa as H,a2 as J,J as S,R as K,N as C}from"./index.ed28eed8.js";import{h as Q}from"./QBtn.ccff1581.js";const te={dark:{type:Boolean,default:null}};function oe(e,a){return M(()=>e.dark===null?a.dark.isActive:e.dark)}let E=[],W=[];function Z(e){W.length===0?e():E.push(e)}function ne(e){E=E.filter(a=>a!==e)}var re=D({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:a,emit:t}){const n=F(),l=q(null);let f=0;const c=[];function h(o){const m=typeof o=="boolean"?o:e.noErrorFocus!==!0,p=++f,B=(r,d)=>{t("validation"+(r===!0?"Success":"Error"),d)},k=r=>{const d=r.validate();return typeof d.then=="function"?d.then(v=>({valid:v,comp:r}),v=>({valid:!1,comp:r,err:v})):Promise.resolve({valid:d,comp:r})};return(e.greedy===!0?Promise.all(c.map(k)).then(r=>r.filter(d=>d.valid!==!0)):c.reduce((r,d)=>r.then(()=>k(d).then(v=>{if(v.valid===!1)return Promise.reject(v)})),Promise.resolve()).catch(r=>[r])).then(r=>{if(r===void 0||r.length===0)return p===f&&B(!0),!0;if(p===f){const{comp:d,err:v}=r[0];if(v!==void 0&&console.error(v),B(!1,d),m===!0){const P=r.find(({comp:T})=>typeof T.focus=="function"&&Q(T.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function s(){f++,c.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function u(o){o!==void 0&&A(o);const m=f+1;h().then(p=>{m===f&&p===!0&&(e.onSubmit!==void 0?t("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function b(o){o!==void 0&&A(o),t("reset"),R(()=>{s(),e.autofocus===!0&&e.noResetFocus!==!0&&y()})}function y(){Z(()=>{if(l.value===null)return;const o=l.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||l.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||l.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(l.value.querySelectorAll("[tabindex]"),m=>m.tabIndex>-1);o!=null&&o.focus({preventScroll:!0})})}N(H,{bindComponent(o){c.push(o)},unbindComponent(o){const m=c.indexOf(o);m>-1&&c.splice(m,1)}});let z=!1;return I(()=>{z=!0}),U(()=>{z===!0&&e.autofocus===!0&&y()}),x(()=>{e.autofocus===!0&&y()}),Object.assign(n.proxy,{validate:h,resetValidation:s,submit:u,reset:b,focus:y,getValidationComponents:()=>c}),()=>L("form",{class:"q-form",ref:l,onSubmit:u,onReset:b},$(a.default))}});let w,g=0;const i=new Array(256);for(let e=0;e<256;e++)i[e]=(e+256).toString(16).substring(1);const _=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return a=>{const t=new Uint8Array(a);return e.getRandomValues(t),t}}return a=>{const t=[];for(let n=a;n>0;n--)t.push(Math.floor(Math.random()*256));return t}})(),O=4096;function ie(){(w===void 0||g+16>O)&&(g=0,w=_(O));const e=Array.prototype.slice.call(w,g,g+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,i[e[0]]+i[e[1]]+i[e[2]]+i[e[3]]+"-"+i[e[4]]+i[e[5]]+"-"+i[e[6]]+i[e[7]]+"-"+i[e[8]]+i[e[9]]+"-"+i[e[10]]+i[e[11]]+i[e[12]]+i[e[13]]+i[e[14]]+i[e[15]]}function G(){const e=q(!J.value);return e.value===!1&&x(()=>{e.value=!0}),e}const j=typeof ResizeObserver!="undefined",V=j===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var se=D({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:a}){let t=null,n,l={width:-1,height:-1};function f(s){s===!0||e.debounce===0||e.debounce==="0"?c():t===null&&(t=setTimeout(c,e.debounce))}function c(){if(t!==null&&(clearTimeout(t),t=null),n){const{offsetWidth:s,offsetHeight:u}=n;(s!==l.width||u!==l.height)&&(l={width:s,height:u},a("resize",l))}}const{proxy:h}=F();if(j===!0){let s;const u=b=>{n=h.$el.parentNode,n?(s=new ResizeObserver(f),s.observe(n),c()):b!==!0&&R(()=>{u(!0)})};return x(()=>{u()}),S(()=>{t!==null&&clearTimeout(t),s!==void 0&&(s.disconnect!==void 0?s.disconnect():n&&s.unobserve(n))}),K}else{let b=function(){t!==null&&(clearTimeout(t),t=null),u!==void 0&&(u.removeEventListener!==void 0&&u.removeEventListener("resize",f,C.passive),u=void 0)},y=function(){b(),n&&n.contentDocument&&(u=n.contentDocument.defaultView,u.addEventListener("resize",f,C.passive),c())};const s=G();let u;return x(()=>{R(()=>{n=h.$el,n&&y()})}),S(b),h.trigger=f,()=>{if(s.value===!0)return L("object",{style:V.style,tabindex:-1,type:"text/html",data:V.url,"aria-hidden":"true",onLoad:y})}}}});function ue(){let e=null;const a=F();function t(){e!==null&&(clearTimeout(e),e=null)}return I(t),S(t),{removeTimeout:t,registerTimeout(n,l){t(),Q(a)===!1&&(e=setTimeout(n,l))}}}export{re as Q,oe as a,se as b,ue as c,ie as d,Z as e,ne as r,te as u};
